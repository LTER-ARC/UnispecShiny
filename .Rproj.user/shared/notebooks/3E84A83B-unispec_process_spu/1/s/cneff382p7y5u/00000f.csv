"0",""
"0","## Check all files have a corrected reflectance"
"0",""
"0","missing_corrections <- processed_data %>%  filter(processed_spectra %>% map(is.null) %>% map_lgl(any)) # remove files w/out spu_spectra"
"0",""
"0","corrected_spectra_files <- processed_data %>% "
"0","  unnest(processed_spectra) %>% "
"0","  filter(!is.na(corrected_reflectance)) %>% # check the column is calculated"
"0","  select(spu_filename, Date, Site) %>% distinct()"
"0",""
"0",""
"0","print(paste0(""Number of raw files: "", nrow(raw_data)))"
"1","[1]"
"1"," ""Number of raw files: 323"""
"1","
"
"0","print(paste0(""Number of corrected Files: "", nrow(corrected_spectra_files)))"
"1","[1]"
"1"," ""Number of corrected Files: 189"""
"1","
"
"0","## print treatments missing corrections"
"0","if(nrow(processed_data) != nrow(raw_data)) {"
"0","  anti_join(raw_data, corrected_spectra_files) %>% "
"0","  group_by(Date, Site, Block, Treatment, Integration) %>% "
"0","  summarize(Num_Files = n()) %>% kable()"
"0","  "
"0","  anti_join(raw_data, processed_data, by = ""spu_filename"") %>% pull(Treatment) %>% unique() %>% print()"
"0","  "
"0","  print(missing_corrections)"
"0","}"
"0",""
"0","##### VIZ: Plot Check first 30 files"
"0",""
"0","plot_data <- processed_data %>% "
"0","    filter(Treatment %in% c(""DARK"", ""REF"", ""CT"", ""CT1"", ""CT2"")) %>% "
"0","   "
"0","  unnest(processed_spectra) %>% "
"0","  gather(key = Status, value = Reflectance, raw_reflectance, corrected_reflectance) "
"0","  "
"0","  # VIZ"
"0","  ggplot(plot_data,mapping = aes(x = Wavelength, y = Reflectance )) + "
"0","  geom_line(aes(color = spu_filename, linetype = Status)) +"
"0","    facet_grid(Site ~ Treatment) +"
"0","  theme_light()+"
"0","  theme(legend.position = ""none"")"
"2","Warning:"
"2"," Removed 13500 row(s) containing missing values (geom_path).
"
